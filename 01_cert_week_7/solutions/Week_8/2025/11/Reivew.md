
## 21일

### 복기 : 
실수가 잦다. 5단 풀이법을 통해  마지막 NULL 체크하면서 문법오류 체크(; , . =)

### 5단 풀이법 적용 :
1. 문제의 요구사항을 파악
2. 문제를 한 줄 요약\
3. 어떤 논리 구조를 쓸지(테이블관계까지 파악, 1:1 1:N)
4. 풀이하면서 수정(JOIN 조건파악)
5. 문법 오류 & NULL 체크

### 추가 :
SQL 엔터티 계층(CATEGORY → PRODUCT → exp)
즉, PRODUCT는 CATEGORY와 1:N 관계 / exp는 CATEGORY와 1:1 관계
exp는 “카테고리 평균 가격 테이블”이므로 CATEGORY 직접 연결이 자연스럽고 흐름이 함부로 안 깨짐


## 22일

### 모르는 거 : 
- GROUP BY할 때 어떤 기준으로 해야할지는 감이 와야할거 같다. 1차적인건 이해가지만 2차적인 것을 모르겠음
- 일단 모르는 용어 학습했음
- ranked(ROW_NUMBER() OVER PARTITION BY) / CURDATE() - INTERVAL 30 DAY

### 확장된 7단계 버전 풀이법 :
1. 문제 요구사항 파악 - "어떤 단위로 보고 싶은가?" (예: 유저별? 주문별? 날짜별? 상품별?)
2. 한 줄 요약 - “어떤 집계 결과를 보고 싶은지”를 문장/수학식처럼 말로 정리
   (예: 유저별 첫 COMPLETED 주문 1건을 뽑고, 그 중 최근 30일을 날짜별로 집계)
3. 중간 결과가 필요한지 판단 (핵심!) - "최종 결과 한 줄이 무엇을 의미하는지"
   (핵심 단위와 최종 GROUP BY 단위 정하기) 
4. 중간 결과를 만드는 쿼리(CTE/subquery) 작성 - "이거 한방에 못간다.."
    ```
    “유저별로 가장 이른/가장 늦은/Top N 하나만 뽑기”
    예: 첫 구매, 마지막 로그인, 최근 주문 1건
    
    “A를 먼저 집계한 뒤 그 결과에 조건을 걸고 싶다”
    예: 유저별 총 주문 금액을 구하고, 그 중 10만원 이상인 유저만
    
    “같은 서브 로직을 여러 번 써야 한다”
    예: 같은 ‘활성 유저 집합’을 다른 쿼리에서 여러 번 조합
    
    “원본 테이블만 가지고 한 번에 GROUP BY로는 의미가 꼬인다”
    예: user_id 기준으로 집계도 해야 하고, 나중에 날짜 기준으로 또 집계해야 하는 문제
    ```
5. 그 중간 결과 기반으로 JOIN/GROUP BY (CTE? FROM? WHERE? JOIN?)
6. 최종 SELECT / GROUP BY 조립 - "중간 결과를 기반으로 필요한 쿼리만 남기고 최종 GROUP BY / 집계 함수 배치"
7. 문법/NULL 검증 및 성능 체크
    - 콤마, alias, BETWEEN 범위, 중복행, 같은 날 여러 주문, NULL 값 등
    - HARD : “이 테이블에 이상한 데이터가 있어도 결과가 버틸까?”까지 상상해보기

### 추가 : 
CTE (WITH) 쓸 타이밍
- 단계가 여러 개로 나뉘는 쿼리
- 중간 결과를 여러 번 재사용해야 할 때
- 길고 꼬인 서브쿼리 때문에 FROM이 지옥이 됐을 떄 (FROM절은 사실상 CTE랑 같지만 여러 절로 나뉘면 CTE를 선호)

WHERE 쓸 타이밍
- EXISTS / NOT EXISTS 패턴 : 값 가져오는 게 아니라, 존재 여부만 중요할 때
- IN / NOT IN 패턴 : "이 집합 안에 속하냐?"를 물을 때 (한 행당 하나의 값만 뽑을 때)

JOIN 쓸 타이밍
- "집계 결과를 컬럼으로 붙이기" 원본 테이블에 컬럼처럼 붙이고 싶다.

# 23일
`22일 복습 문제`

### 복기 : 문제7풀이법 활용 괜찮은듯 다음 풀이 때 자세한 복기 함더